var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function c(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function i(t,e,n,o,c,r,s){const i=function(t,e,n,o){if(t[2]&&o){const c=t[2](o(n));if(void 0===e.dirty)return c;if("object"==typeof c){const t=[],n=Math.max(e.dirty.length,c.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|c[o];return t}return e.dirty|c}return e.dirty}(e,o,c,r);if(i){const c=l(e,n,o,s);t.p(c,i)}}function a(t,e,n=e){return t.set(n),e}function u(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function $(){return m(" ")}function g(){return m("")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function y(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function k(t,e,n){t.classList[n?"add":"remove"](e)}let w;function v(t){w=t}function _(){if(!w)throw new Error("Function called outside component initialization");return w}function O(){const t=_();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const c=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach((e=>{e.call(t,c)}))}}}const E=[],S=[],z=[],C=[],L=Promise.resolve();let M=!1;function N(t){z.push(t)}let T=!1;const j=new Set;function A(){if(!T){T=!0;do{for(let t=0;t<E.length;t+=1){const e=E[t];v(e),F(e.$$)}for(v(null),E.length=0;S.length;)S.pop()();for(let t=0;t<z.length;t+=1){const e=z[t];j.has(e)||(j.add(e),e())}z.length=0}while(E.length);for(;C.length;)C.pop()();M=!1,T=!1,j.clear()}}function F(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const P=new Set;let D;function I(){D={r:0,c:[],p:D}}function H(){D.r||o(D.c),D=D.p}function J(t,e){t&&t.i&&(P.delete(t),t.i(e))}function R(t,e,n,o){if(t&&t.o){if(P.has(t))return;P.add(t),D.c.push((()=>{P.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function G(t,e){R(t,1,1,(()=>{e.delete(t.key)}))}function U(t,e,n,o,c,r,s,l,i,a,u,f){let d=t.length,p=r.length,m=d;const $={};for(;m--;)$[t[m].key]=m;const g=[],h=new Map,y=new Map;for(m=p;m--;){const t=f(c,r,m),l=n(t);let i=s.get(l);i?o&&i.p(t,e):(i=a(l,t),i.c()),h.set(l,g[m]=i),l in $&&y.set(l,Math.abs(m-$[l]))}const x=new Set,b=new Set;function k(t){J(t,1),t.m(l,u),s.set(t.key,t),u=t.first,p--}for(;d&&p;){const e=g[p-1],n=t[d-1],o=e.key,c=n.key;e===n?(u=e.first,d--,p--):h.has(c)?!s.has(o)||x.has(o)?k(e):b.has(c)?d--:y.get(o)>y.get(c)?(b.add(o),k(e)):(x.add(c),d--):(i(n,s),d--)}for(;d--;){const e=t[d];h.has(e.key)||i(e,s)}for(;p;)k(g[p-1]);return g}function W(t){t&&t.c()}function q(t,n,r,s){const{fragment:l,on_mount:i,on_destroy:a,after_update:u}=t.$$;l&&l.m(n,r),s||N((()=>{const n=i.map(e).filter(c);a?a.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(N)}function B(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,e){-1===t.$$.dirty[0]&&(E.push(t),M||(M=!0,L.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,c,r,s,l,i,a=[-1]){const u=w;v(e);const f=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:a,skip_bound:!1};let p=!1;if(f.ctx=r?r(e,c.props||{},((t,n,...o)=>{const c=o.length?o[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=c)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](c),p&&V(e,t)),n})):[],f.update(),p=!0,o(f.before_update),f.fragment=!!s&&s(f.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);f.fragment&&f.fragment.l(t),t.forEach(d)}else f.fragment&&f.fragment.c();c.intro&&J(e.$$.fragment),q(e,c.target,c.anchor,c.customElement),A()}v(u)}class Q{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const X=async t=>(await new Promise(((t,e)=>{const n=document.createElement("script");n.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCO0eT8a8507-un6p7aNNdJ_VF22jtcHW4&v=3&libraries=places",n.onload=t,n.onerror=e,document.head.appendChild(n)})),new google.maps.places.Autocomplete(t,{types:["geocode"]}));function Y(e){let n,o,c,r;return{c(){n=p("div"),o=p("label"),o.textContent="What time is it in",c=$(),r=p("input"),x(o,"for","search-text"),x(r,"class","mx-2 px-1 py-2 flex-grow focus:outline-none focus:ring-1 ring-green-500 rounded-sm"),x(r,"id","search-text"),x(r,"type","search"),x(r,"placeholder","some city"),x(n,"class","flex place-items-center rounded-xl bg-white px-4 py-2 my-4")},m(t,s){f(t,n,s),u(n,o),u(n,c),u(n,r),e[1](r)},p:t,i:t,o:t,d(t){t&&d(n),e[1](null)}}}function Z(t,e,n){let o,c;const r=O();var s;function l(){const t=c.getPlace(),e=t.geometry.location,s={location:t.formatted_address,lat:e.lat(),lng:e.lng(),minutesOffset:t.utc_offset_minutes};n(0,o.value="",o),r("locationselected",s)}return s=async()=>{c=await X(o),c.addListener("place_changed",l)},_().$$.on_mount.push(s),[o,function(t){S[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class tt extends Q{constructor(t){super(),K(this,t,Z,Y,r,{})}}function et(e){let n;return{c(){n=p("div"),n.innerHTML='<span>Fork it on <a href="https://github.com/matita/clocks/">GitHub</a></span>\n  ·\n  <span>Need a feature? Found a bug? <a href="https://github.com/matita/clocks/issues">File an issue</a>!</span>\n  ·\n  <span>Made by <a href="http://matita.github.io/2015/10/17/clocks/">Matita</a></span>',x(n,"class","text-center text-sm pb-2 text-gray-400")},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&d(n)}}}class nt extends Q{constructor(t){super(),K(this,t,null,et,r,{})}}const ot=[];function ct(e,n=t){let o;const c=[];function s(t){if(r(e,t)&&(e=t,o)){const t=!ot.length;for(let t=0;t<c.length;t+=1){const n=c[t];n[1](),ot.push(n,e)}if(t){for(let t=0;t<ot.length;t+=2)ot[t][0](ot[t+1]);ot.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(r,l=t){const i=[r,l];return c.push(i),1===c.length&&(o=n(s)||t),r(e),()=>{const t=c.indexOf(i);-1!==t&&c.splice(t,1),0===c.length&&(o(),o=null)}}}}const rt={subscribe:ct(Date.now(),(t=>{const e=setInterval((()=>{t(Date.now())}),100);return()=>{clearInterval(e)}})).subscribe};function st(t){let e,n,o,c;const r=t[2].default,s=function(t,e,n,o){if(t){const c=l(t,e,n,o);return t[0](c)}}(r,t,t[1],null);return{c(){e=p("button"),s&&s.c(),x(e,"class","uppercase px-2 focus:outline-none focus:ring-1 focus:ring-gray-300"),k(e,"text-green-500",!t[0]),k(e,"text-red-500",t[0])},m(r,l){f(r,e,l),s&&s.m(e,null),n=!0,o||(c=h(e,"click",y(t[3])),o=!0)},p(t,[n]){s&&s.p&&2&n&&i(s,r,t,t[1],n,null,null),1&n&&k(e,"text-green-500",!t[0]),1&n&&k(e,"text-red-500",t[0])},i(t){n||(J(s,t),n=!0)},o(t){R(s,t),n=!1},d(t){t&&d(e),s&&s.d(t),o=!1,c()}}}function lt(t,e,n){let{$$slots:o={},$$scope:c}=e,{danger:r=!1}=e;return t.$$set=t=>{"danger"in t&&n(0,r=t.danger),"$$scope"in t&&n(1,c=t.$$scope)},[r,c,o,function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}(t,e)}]}class it extends Q{constructor(t){super(),K(this,t,lt,st,r,{danger:0})}}const{subscribe:at,update:ut}=ct([]);let ft=1;var dt={subscribe:at,add:t=>ut((e=>e.concat({...t,id:ft++}))),rename:(t,e)=>ut((n=>n.map((n=>n!==t?n:{...t,name:e})))),delete:t=>ut((e=>e.filter((e=>e!==t))))};function pt(t){let e,n,o,c,r,s,l,i,a;return c=new it({props:{danger:!0,$$slots:{default:[mt]},$$scope:{ctx:t}}}),c.$on("click",t[4]),s=new it({props:{$$slots:{default:[$t]},$$scope:{ctx:t}}}),s.$on("click",t[2]),{c(){e=p("button"),e.textContent="×",n=$(),o=p("div"),W(c.$$.fragment),r=$(),W(s.$$.fragment),x(e,"class","absolute top-1 right-1 px-2 focus:outline-none focus:ring-1"),x(o,"class","text-right")},m(d,p){f(d,e,p),f(d,n,p),f(d,o,p),q(c,o,null),u(o,r),q(s,o,null),l=!0,i||(a=h(e,"click",y(t[6])),i=!0)},p(t,e){const n={};128&e&&(n.$$scope={dirty:e,ctx:t}),c.$set(n);const o={};128&e&&(o.$$scope={dirty:e,ctx:t}),s.$set(o)},i(t){l||(J(c.$$.fragment,t),J(s.$$.fragment,t),l=!0)},o(t){R(c.$$.fragment,t),R(s.$$.fragment,t),l=!1},d(t){t&&d(e),t&&d(n),t&&d(o),B(c),B(s),i=!1,a()}}}function mt(t){let e;return{c(){e=m("Delete")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function $t(t){let e;return{c(){e=m("Rename")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function gt(t){let e,n,o,c,r,s,l,i,a,g,y=(t[0].name||"---")+"",w=t[0].location+"",v=t[1]&&pt(t);return{c(){e=p("div"),n=p("div"),o=m(y),c=$(),r=p("div"),s=m(w),l=$(),v&&v.c(),x(n,"class","text-green-500"),x(r,"class","text-xs text-gray-400"),x(e,"class","bg-white px-4 py-2 mb-2 relative rounded-xl transition-all transform"),k(e,"z-10",t[1]),k(e,"-translate-y-1",t[1]),k(e,"shadow-none",!t[1]),k(e,"shadow-lg",t[1])},m(d,p){f(d,e,p),u(e,n),u(n,o),u(e,c),u(e,r),u(r,s),u(e,l),v&&v.m(e,null),i=!0,a||(g=h(e,"click",t[3]),a=!0)},p(t,[n]){(!i||1&n)&&y!==(y=(t[0].name||"---")+"")&&b(o,y),(!i||1&n)&&w!==(w=t[0].location+"")&&b(s,w),t[1]?v?(v.p(t,n),2&n&&J(v,1)):(v=pt(t),v.c(),J(v,1),v.m(e,null)):v&&(I(),R(v,1,1,(()=>{v=null})),H()),2&n&&k(e,"z-10",t[1]),2&n&&k(e,"-translate-y-1",t[1]),2&n&&k(e,"shadow-none",!t[1]),2&n&&k(e,"shadow-lg",t[1])},i(t){i||(J(v),i=!0)},o(t){R(v),i=!1},d(t){t&&d(e),v&&v.d(),a=!1,g()}}}let ht=ct(null);function yt(t,e,n){let o,c;s(t,ht,(t=>n(5,c=t)));let{clock:r}=e;return t.$$set=t=>{"clock"in t&&n(0,r=t.clock)},t.$$.update=()=>{33&t.$$.dirty&&n(1,o=c===r)},[r,o,function(){const t=prompt("Name of the clock:",r.name||"");null!==t&&(a(ht,c=null,c),dt.rename(r,t))},function(){a(ht,c=r,c)},function(){confirm("Are you sure you want to delete this clock?")&&(a(ht,c=null,c),dt.delete(r))},c,()=>n(1,o=!1)]}class xt extends Q{constructor(t){super(),K(this,t,yt,gt,r,{clock:0})}}function bt(t,e,n){const o=t.slice();return o[7]=e[n],o}function kt(t,e){let n,o,c;return o=new xt({props:{clock:e[7]}}),{key:t,first:null,c(){n=g(),W(o.$$.fragment),this.first=n},m(t,e){f(t,n,e),q(o,t,e),c=!0},p(t,n){e=t;const c={};4&n&&(c.clock=e[7]),o.$set(c)},i(t){c||(J(o.$$.fragment,t),c=!0)},o(t){R(o.$$.fragment,t),c=!1},d(t){t&&d(n),B(o,t)}}}function wt(t){let e,n,o,c,r,s,l,i,a,g,h=[],y=new Map,w=t[2];const v=t=>t[7].id;for(let e=0;e<w.length;e+=1){let n=bt(t,w,e),o=v(n);y.set(o,h[e]=kt(o,n))}return{c(){e=p("div"),n=p("div"),o=p("div"),c=p("span"),r=m(t[1]),s=$(),l=p("div"),l.textContent=`GMT${t[3]>=0?`+${t[3]}`:t[3]}`,i=$(),a=p("div");for(let t=0;t<h.length;t+=1)h[t].c();x(l,"class","text-xs text-gray-400"),x(o,"class","text-center py-2 px-2 sticky top-0"),x(n,"class","relative w-24"),x(a,"class","flex-grow"),x(e,"class","flex"),k(e,"clock-local",t[0].isLocal)},m(t,d){f(t,e,d),u(e,n),u(n,o),u(o,c),u(c,r),u(o,s),u(o,l),u(e,i),u(e,a);for(let t=0;t<h.length;t+=1)h[t].m(a,null);g=!0},p(t,[n]){(!g||2&n)&&b(r,t[1]),4&n&&(w=t[2],I(),h=U(h,n,v,1,t,w,y,a,G,kt,null,bt),H()),1&n&&k(e,"clock-local",t[0].isLocal)},i(t){if(!g){for(let t=0;t<w.length;t+=1)J(h[t]);g=!0}},o(t){for(let t=0;t<h.length;t+=1)R(h[t]);g=!1},d(t){t&&d(e);for(let t=0;t<h.length;t+=1)h[t].d()}}}function vt(t,e,n){let o,c;s(t,rt,(t=>n(4,c=t)));let r,{zone:l}=e;const i=new Date,a=("minutesOffset"in l?l.minutesOffset:-i.getTimezoneOffset())/60;return t.$$set=t=>{"zone"in t&&n(0,l=t.zone)},t.$$.update=()=>{17&t.$$.dirty&&(i.setTime(c+60*((l.minutesOffset||0)+(l.isLocal?0:i.getTimezoneOffset()))*1e3),n(1,r=i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))),1&t.$$.dirty&&n(2,o=l.clocks.sort(((t,e)=>(t.name||"").localeCompare(e.name||""))))},[l,r,o,a,c]}class _t extends Q{constructor(t){super(),K(this,t,vt,wt,r,{zone:0})}}function Ot(t,e,n){const o=t.slice();return o[2]=e[n],o}function Et(t,e){let n,o,c;return o=new _t({props:{zone:e[2]}}),{key:t,first:null,c(){n=g(),W(o.$$.fragment),this.first=n},m(t,e){f(t,n,e),q(o,t,e),c=!0},p(t,n){e=t;const c={};1&n&&(c.zone=e[2]),o.$set(c)},i(t){c||(J(o.$$.fragment,t),c=!0)},o(t){R(o.$$.fragment,t),c=!1},d(t){t&&d(n),B(o,t)}}}function St(t){let e,n,o=[],c=new Map,r=t[0];const s=t=>t[2].minutesOffset;for(let e=0;e<r.length;e+=1){let n=Ot(t,r,e),l=s(n);c.set(l,o[e]=Et(l,n))}return{c(){e=p("div");for(let t=0;t<o.length;t+=1)o[t].c();x(e,"class","")},m(t,c){f(t,e,c);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,[n]){1&n&&(r=t[0],I(),o=U(o,n,s,1,t,r,c,e,G,Et,null,Ot),H())},i(t){if(!n){for(let t=0;t<r.length;t+=1)J(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)R(o[t]);n=!1},d(t){t&&d(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function zt(t,e,n){let o,c;return s(t,dt,(t=>n(1,c=t))),t.$$.update=()=>{2&t.$$.dirty&&n(0,o=Object.entries(c.reduce(((t,e)=>{const{minutesOffset:n}=e;return(t[n]=t[n]||[]).push(e),t}),{})).map((([t,e])=>({minutesOffset:+t,clocks:e}))).sort(((t,e)=>t.minutesOffset-e.minutesOffset)))},[o,c]}class Ct extends Q{constructor(t){super(),K(this,t,zt,St,r,{})}}function Lt(e){let n,o,c,r,s,l,i,a;return c=new tt({}),c.$on("locationselected",e[0]),s=new Ct({}),i=new nt({}),{c(){n=p("div"),o=p("div"),W(c.$$.fragment),r=$(),W(s.$$.fragment),l=$(),W(i.$$.fragment),x(o,"class","max-w-xl mx-auto my-4 text-gray-600"),x(n,"class","flex-grow")},m(t,e){f(t,n,e),u(n,o),q(c,o,null),u(o,r),q(s,o,null),f(t,l,e),q(i,t,e),a=!0},p:t,i(t){a||(J(c.$$.fragment,t),J(s.$$.fragment,t),J(i.$$.fragment,t),a=!0)},o(t){R(c.$$.fragment,t),R(s.$$.fragment,t),R(i.$$.fragment,t),a=!1},d(t){t&&d(n),B(c),B(s),t&&d(l),B(i,t)}}}function Mt(t){const e=new URLSearchParams(location.search.substr(1));var n;(n=e.get("clocks"),(n||"").split("|").filter((t=>!!t)).map((t=>{const[e,n,o]=t.split(";").map(decodeURIComponent);return{location:e,name:o,minutesOffset:+n}}))).forEach(dt.add),history.replaceState({},"Clocks","?");try{JSON.parse(localStorage.clocks_items).forEach(dt.add)}catch(t){console.log("error while loading from localStorage",t)}return dt.subscribe((t=>localStorage.clocks_items=JSON.stringify(t.filter((t=>!t.isLocal))))),[function({detail:t}){dt.add(t)}]}return new class extends Q{constructor(t){super(),K(this,t,Mt,Lt,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
